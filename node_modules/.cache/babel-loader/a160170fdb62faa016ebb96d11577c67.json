{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\hgaff\\\\OneDrive\\\\Documents\\\\derivativesnew\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\hgaff\\\\OneDrive\\\\Documents\\\\derivativesnew\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\hgaff\\\\OneDrive\\\\Documents\\\\derivativesnew\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\hgaff\\\\OneDrive\\\\Documents\\\\derivativesnew\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\hgaff\\\\OneDrive\\\\Documents\\\\derivativesnew\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\hgaff\\\\OneDrive\\\\Documents\\\\derivativesnew\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\hgaff\\\\OneDrive\\\\Documents\\\\derivativesnew\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\hgaff\\\\OneDrive\\\\Documents\\\\derivativesnew\\\\src\\\\components\\\\viewtrade.js\";\nimport React from \"react\";\nimport ViewtradeComponent from \"./viewtradecomponent\";\nimport axios from \"axios\"; //This file is for when the user looks at a trades information in either the portfolio of todays trades or the notifications tab of flagged trade alerts from ML/Backend\n\nvar Viewtrade =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Viewtrade, _React$Component);\n\n  function Viewtrade() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Viewtrade);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Viewtrade)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      visible: false,\n      tradeid: _this.props.tradeid,\n      fetched: false,\n      data: {},\n      ignore: _this.props.ignore,\n      sensitivity: _this.props.sensitivity,\n      updateSens: _this.props.updateSens\n    };\n\n    _this.showModal = function (e) {\n      e.stopPropagation();\n\n      _this.setState({\n        visible: true\n      });\n    };\n\n    _this.handleOk = function (e) {\n      e.stopPropagation();\n\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleCancel = function (e) {\n      e.stopPropagation();\n\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleEdit = function (e) {\n      e.stopPropagation();\n      console.log(\"Requesting to edit trade \".concat(_this.state.tradeid)); // Take to the edit trade form for this trade id\n\n      _this.setState({\n        visible: false\n      });\n    };\n\n    _this.handleDelete =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.stopPropagation();\n                _context.next = 3;\n                return axios.delete(\"http://127.0.0.1:5000/trades/badTrades/remove/\".concat(_this.state.tradeid)).then(function (response) {\n                  console.log(response.data);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 3:\n                _context.next = 5;\n                return axios.delete(\"http://127.0.0.1:5000/trades/delete/\".concat(_this.state.tradeid)).then(function (response) {\n                  console.log(response.data);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 5:\n                _this.setState({\n                  visible: false\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.getTradedata =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios.get(\"http://127.0.0.1:5000/trades/get/\".concat(_this.state.tradeid)).then(function (response) {\n                _this.setState({\n                  data: response.data.result\n                });\n              }).catch(function (error) {\n                console.log(error);\n              });\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    _this.handleIgnore =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(e) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e.stopPropagation();\n                _context3.next = 3;\n                return axios.delete(\"http://127.0.0.1:5000/trades/badTrades/remove/\".concat(_this.state.tradeid)).then(function (response) {\n                  console.log(response.data);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 3:\n                _context3.next = 5;\n                return axios.get(\"http://127.0.0.1:5000/trades/verificationSensitivity/set/\".concat(_this.state.sensitivity - 1)).then(function (response) {\n                  console.log(response);\n                }).catch(function (error) {\n                  console.log(error);\n                });\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(Viewtrade, [{\n    key: \"render\",\n    //renders UI elements and ensures that the trade data is only fetched once, preventing an infinite API request loop on rerenders\n    value: function render() {\n      if (!this.state.fetched) {\n        this.getTradedata();\n        this.setState({\n          fetched: true\n        });\n      }\n\n      return React.createElement(ViewtradeComponent, {\n        showModal: this.showModal,\n        handleOk: this.handleOk,\n        handleCancel: this.handleCancel,\n        handleEdit: this.handleEdit,\n        data: this.state,\n        handleDelete: this.handleDelete,\n        handleIgnore: this.handleIgnore,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return Viewtrade;\n}(React.Component);\n\nexport default Viewtrade;","map":{"version":3,"sources":["C:/Users/hgaff/OneDrive/Documents/derivativesnew/src/components/viewtrade.js"],"names":["React","ViewtradeComponent","axios","Viewtrade","state","visible","tradeid","props","fetched","data","ignore","sensitivity","updateSens","showModal","e","stopPropagation","setState","handleOk","handleCancel","handleEdit","console","log","handleDelete","delete","then","response","catch","error","getTradedata","get","result","handleIgnore","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport ViewtradeComponent from \"./viewtradecomponent\";\r\nimport axios from \"axios\";\r\n\r\n//This file is for when the user looks at a trades information in either the portfolio of todays trades or the notifications tab of flagged trade alerts from ML/Backend\r\nclass Viewtrade extends React.Component {\r\n  state = {\r\n    visible: false,\r\n    tradeid: this.props.tradeid,\r\n    fetched: false,\r\n    data: {},\r\n    ignore: this.props.ignore,\r\n    sensitivity: this.props.sensitivity,\r\n    updateSens: this.props.updateSens\r\n  };\r\n\r\n  //Controls visibility of the modal\r\n  showModal = e => {\r\n    e.stopPropagation();\r\n    this.setState({\r\n      visible: true\r\n    });\r\n  };\r\n\r\n  handleOk = e => {\r\n    e.stopPropagation();\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  };\r\n\r\n  handleCancel = e => {\r\n    e.stopPropagation();\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  };\r\n\r\n  handleEdit = e => {\r\n    e.stopPropagation();\r\n    console.log(`Requesting to edit trade ${this.state.tradeid}`);\r\n    // Take to the edit trade form for this trade id\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  };\r\n\r\n  //If the user is to click on delete trade, API requests made to delete from flagged trade list in back end (if in it) and to delete from trades in database.\r\n  handleDelete = async e => {\r\n    e.stopPropagation();\r\n    await axios.delete(`http://127.0.0.1:5000/trades/badTrades/remove/${this.state.tradeid}`)\r\n      .then( response => {\r\n        console.log(response.data)\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n    await axios.delete(`http://127.0.0.1:5000/trades/delete/${this.state.tradeid}`)\r\n      .then( response => {\r\n        console.log(response.data)\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n    this.setState({ visible: false });\r\n  };\r\n\r\n  /// gets data for the currently clicked on trade to display in modal for more information\r\n  getTradedata = async () => {\r\n    await axios.get(`http://127.0.0.1:5000/trades/get/${this.state.tradeid}`)\r\n      .then( response => {\r\n        this.setState({data : response.data.result})\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  //If is in notifications/alerts this method hnadles if the user clicks on ignore allert, this will remove the trade from the flagged trade list in back end and adjust the ML sensitivity by reducing it\r\n  //as the ML has cleaerly been too sensitive to flag a good trade\r\n  handleIgnore = async e => {\r\n    e.stopPropagation()\r\n    await axios.delete(`http://127.0.0.1:5000/trades/badTrades/remove/${this.state.tradeid}`)\r\n      .then( response => {\r\n        console.log(response.data)\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n    await axios.get(`http://127.0.0.1:5000/trades/verificationSensitivity/set/${this.state.sensitivity - 1}`)\r\n      .then(response => {\r\n        console.log(response)\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n      })\r\n  }\r\n\r\n  //renders UI elements and ensures that the trade data is only fetched once, preventing an infinite API request loop on rerenders\r\n  render(){\r\n    if (!this.state.fetched){\r\n      this.getTradedata();\r\n      this.setState({ fetched : true })\r\n    }\r\n    return (\r\n      <ViewtradeComponent\r\n        showModal={this.showModal}\r\n        handleOk={this.handleOk}\r\n        handleCancel={this.handleCancel}\r\n        handleEdit={this.handleEdit}\r\n        data={this.state}\r\n        handleDelete={this.handleDelete}\r\n        handleIgnore={this.handleIgnore}\r\n      />\r\n    );\r\n  }\r\n}\r\nexport default Viewtrade;\r\n"]},"metadata":{},"sourceType":"module"}